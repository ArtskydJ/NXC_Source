//Fox, Goose, and Beans Puzzle
#define fox     1
#define foxx    3
#define foxy    14

#define goose   2
#define goosex  7
#define goosey  30

#define sack    3
#define sackx   8
#define sacky   52

#define boatx1  30
#define boatx2  70

#download "FGB-river.ric"
#download "FGB-boat.ric"
#download "FGB-farmer.ric"
#download "FGB-fox.ric"
#download "FGB-goose.ric"
#download "FGB-sack.ric"

bool foxr=false,gooser=false,sackr=false,boatr=false;

void howto()
    {
    ClearScreen();
    TextOut(0,LCD_LINE1,"A farmer owns a ",0);
    TextOut(0,LCD_LINE2,"Fox, a Goose and",0);
    TextOut(0,LCD_LINE3,"and Sack of     ",0);
    TextOut(0,LCD_LINE4,"Beans. They need",0);
    TextOut(0,LCD_LINE5,"to be brought to",0);
    TextOut(0,LCD_LINE6,"other side of   ",0);
    TextOut(0,LCD_LINE7,"the river. If   ",0);
    TextOut(42,LCD_LINE8,      "..."      ,0);
    while (!ButtonPressed(BTNCENTER)) {}
    until (!ButtonPressed(BTNCENTER)) {}
    ClearScreen();
    TextOut(0,LCD_LINE1,"the Fox and     ",0);
    TextOut(0,LCD_LINE2,"Goose are left  ",0);
    TextOut(0,LCD_LINE3,"alone, the goose",0);
    TextOut(0,LCD_LINE4," will be eaten. ",0);
    TextOut(0,LCD_LINE5,"If the Goose and",0);
    TextOut(0,LCD_LINE6,"sack are left   ",0);
    TextOut(0,LCD_LINE7,"alone, the Sack ",0);
    TextOut(42,LCD_LINE8,      "..."      ,0);
    while (!ButtonPressed(BTNCENTER)) {}
    until (!ButtonPressed(BTNCENTER)) {}
    ClearScreen();
    TextOut(0,LCD_LINE1,"of beans will be",0);
    TextOut(0,LCD_LINE2,"eaten. The      ",0);
    TextOut(0,LCD_LINE3,"Farmer's boat   ",0);
    TextOut(0,LCD_LINE4,"can only hold   ",0);
    TextOut(0,LCD_LINE5,"himself and one ",0);
    TextOut(0,LCD_LINE6,"other object.   ",0);
    //TextOut(0,LCD_LINE7,"",DRAW_OPT_NORMAL);
    TextOut(45,LCD_LINE8,      "OK"       ,0);
    while (!ButtonPressed(BTNCENTER)) {}
    until (!ButtonPressed(BTNCENTER)) {}
    ClearScreen();
    }
    
void draw(int intrans)
    {
    int boaty,transx=0;
    GraphicOut(boatx1,boaty,"FGB-river.ric",0);

    if (intrans==0)
        {
        GraphicOut((boatr*40)+transx,boaty,"FGB-boat.ric",0);
        GraphicOut(4+boatx1+(boatr*40),boaty-12,"FGB-farmer.ric",0);
        
        GraphicOut(0,foxy,"FGB-fox.ric",0);
        GraphicOut(0,goosey,"FGB-goose.ric",0);
        GraphicOut(0,sacky,"FGB-sack.ric",0);
        }
    else if (intrans==fox)
        {
        //GraphicOut(foxx+transx,foxy,"FGB-fox.ric",0);
        GraphicOut(0,goosey,"FGB-goose.ric",0);
        GraphicOut(0,sacky,"FGB-sack.ric",0);
        }
    else if (intrans==goose)
        {
        GraphicOut(0,foxy,"FGB-fox.ric",0);
        //GraphicOut(0,goosey,"FGB-goose.ric",0);
        GraphicOut(0,sacky,"FGB-sack.ric",0);
        }
    else if (intrans==sack)
        {
        GraphicOut(0,foxy,"FGB-fox.ric",0);
        GraphicOut(0,goosey,"FGB-goose.ric",0);
        //GraphicOut(0,sacky,"FGB-sack.ric",0);
        }
    else {PlayTone(4000,10000);Wait(10000);Stop(true);}
    }

void drawdebug(int intrans)
    {
    int boaty,transx=0;
    RectOut(boatx1,boaty,"FGB-river.ric",0);

    if (intrans==0)
        {
        GraphicOut((boatr*40)+transx,boaty,"FGB-boat.ric",0);
        GraphicOut(4+boatx1+(boatr*40),boaty-12,"FGB-farmer.ric",0);

        GraphicOut(0,foxy,"FGB-fox.ric",0);
        GraphicOut(0,goosey,"FGB-goose.ric",0);
        GraphicOut(0,sacky,"FGB-sack.ric",0);
        }
    else if (intrans==fox)
        {
        //GraphicOut(foxx+transx,foxy,"FGB-fox.ric",0);
        GraphicOut(0,goosey,"FGB-goose.ric",0);
        GraphicOut(0,sacky,"FGB-sack.ric",0);
        }
    else if (intrans==goose)
        {
        GraphicOut(0,foxy,"FGB-fox.ric",0);
        //GraphicOut(0,goosey,"FGB-goose.ric",0);
        GraphicOut(0,sacky,"FGB-sack.ric",0);
        }
    else if (intrans==sack)
        {
        GraphicOut(0,foxy,"FGB-fox.ric",0);
        GraphicOut(0,goosey,"FGB-goose.ric",0);
        //GraphicOut(0,sacky,"FGB-sack.ric",0);
        }
    else {PlayTone(4000,10000);Wait(10000);Stop(true);}
    }

task main()
    {
    int intransport=0;
    bool alive=true,win=false;
    draw(intransport);
    howto();
    while (alive&&win==false)
        {
        
        
        //draw(intransport);
        }
    
    }
